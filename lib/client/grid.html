<template name="SocialMediaFeed">
	<div class="container-social-media-feed" id="mosaic-container">
		{{#if Template.subscriptionsReady}}

			{{#masonryContainer columnWidth=320 transitionDuration="0.2s" id="MasonryContainer" }}
				{{#each item}}
					{{#masonryElement "MasonryContainer"}}
						{{> SocialMediaTile}}
					{{/masonryElement}}
				{{/each}}
			{{/masonryContainer}}

		{{/if}}
	</div>
</template>


<template name="SocialMediaTile">
	<div class="tile {{social_network}} {{data.type}}" id="{{_id}}">
		{{#if equal social_network "instagram"}}
			{{> InstagramTile}}
		{{/if}}
		{{#if equal social_network "facebook"}}
			{{> FacebookTile}}
		{{/if}}
		{{#if equal content_type "custom-text"}}
			{{> CustomTextTile}}
		{{/if}}
		{{#if equal content_type "custom-image"}}
			{{> CustomImageTile}}
		{{/if}}
		{{#if equal content_type "custom-date"}}
			{{> CustomDateTile}}
		{{/if}}
	</div>
</template>

<template name="FacebookTile">
	{{#if equal data.type "photo"}}
		<a href="{{data.link}}">
			<figure>
				<img class="social-media-image" src="{{large_image}}" alt="{{data.caption.text}}">
				<figcaption class="tile">
					<span class="tile-center">{{data.message}}</span>
				</figcaption>
			</figure>
		</a>
	{{else}}
		<a href="{{data.link}}">
			<div class="facebook-text-post">
				<div class="info"><span class="profile">{{data.from.name}}</span> / {{formatFbDate data.created_time}}</div>
				<h4>{{ headLineText data.message "120"}}</h4>
			</div>
		</a>
	{{/if}}
</template>

<template name="InstagramTile">
	<a href="{{data.link}}">
		<figure>
			<img class="social-media-image" src="{{data.images.low_resolution.url}}" srcset="{{data.images.low_resolution.url}} 1x, {{data.images.standard_resolution.url}} 2x" alt="{{data.caption.text}}">
			<figcaption class="tile">
				<span class="tile-center">{{data.caption.text}}</span>
			</figcaption>
		</figure>
	</a>
</template>

<template name="CustomTile">
	<a href="{{url}}">
		<figure>
			<img class="social-media-image" src="{{image_link}}" alt="{{title}}">
			<figcaption class="tile">
				<span class="tile-center">{{title}}</span>
			</figcaption>
		</figure>
	</a>
</template>

<template name="CustomTextTile">
	<a href="{{url}}">
		<div class="facebook-text-post">
			<div class="info"><span class="profile">{{social_network}}</span> / {{formatDate created_at}}</div>
			<h4>{{ headLineText title "120"}}</h4>
		</div>
	</a>
</template>

<template name="CustomImageTile">
	<a href="{{url}}">
		<figure>
			<img class="social-media-image" src="{{image_url}}" alt="{{image_alt}}">
			<figcaption class="tile">
				<span class="tile-center">{{title}}</span>
			</figcaption>
		</figure>
	</a>
</template>

<template name="CustomDateTile">
	<a href="{{url}}">
		<div class="custom-date-post">
			<div class="info"><span class="network">{{dateFormatWeekDay date}}</span> / {{social_network}}</div>
			<h4>{{ dateFormatDayMonth date }}</h4>
			<p>{{ headLineText title "100"}}</p>
		</div>
	</a>
</template>